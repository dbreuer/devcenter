



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.9.2">
    
    
      
        <title>Use your own Docker image - Bitrise DevCenter</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Source+Code+Pro">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Source Code Pro","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism-okaidia.min.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Bitrise DevCenter" class="md-header-nav__button md-logo">
          
            <img src="../img/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                <!-- Bitrise DevCenter -->

                
                  
                

                <span class="md-header-nav__breadcrumbs current">Use your own Docker image</span>

              </span>
              <span class="md-header-nav__topic">
                Use your own Docker image
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dbreuer/devcenter/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../img/logo.svg" width="48" height="48">
      
    </span>
    Bitrise DevCenter
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dbreuer/devcenter/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Bitrise DevCenter - What is Bitrise? " class="md-nav__link">
      Bitrise DevCenter - What is Bitrise? 
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../connecting-a-repository/" title="Connecting a repository" class="md-nav__link">
      Connecting a repository
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setting-up-configuration/" title="Setting up configuration" class="md-nav__link">
      Setting up configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setting-up-ssh-keys/" title="Setting up SSH keys" class="md-nav__link">
      Setting up SSH keys
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android-tips-and-tricks/" title="Android tips and tricks" class="md-nav__link">
      Android tips and tricks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android-code-signing/" title="Android Code Signing" class="md-nav__link">
      Android Code Signing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../frequent-android-issues/" title="Frequent Android issues" class="md-nav__link">
      Frequent Android issues
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../the-environment/" title="The Android/Linux/Docker environment" class="md-nav__link">
      The Android/Linux/Docker environment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../app-status-badge/" title="App Status / Badge API" class="md-nav__link">
      App Status / Badge API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../build-trigger/" title="Build Trigger API" class="md-nav__link">
      Build Trigger API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../outgoing-webhooks/" title="Outgoing Webhooks" class="md-nav__link">
      Outgoing Webhooks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basics-of-bitrise-yml/" title="Basics of bitrise.yml" class="md-nav__link">
      Basics of bitrise.yml
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../create-your-own-step/" title="Create your own Step" class="md-nav__link">
      Create your own Step
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Install the Bitrise CLI" class="md-nav__link">
      Install the Bitrise CLI
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../most-important-concepts/" title="Most important concepts" class="md-nav__link">
      Most important concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../run-your-first-build/" title="Run your first build" class="md-nav__link">
      Run your first build
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../secrets/" title="Secrets" class="md-nav__link">
      Secrets
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../steps/" title="Steps" class="md-nav__link">
      Steps
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../workflows/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about-caching/" title="About caching" class="md-nav__link">
      About caching
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching-cocoapods/" title="Caching Cocoapods" class="md-nav__link">
      Caching Cocoapods
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching-gradle/" title="Caching Gradle" class="md-nav__link">
      Caching Gradle
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching-maven/" title="Caching Maven" class="md-nav__link">
      Caching Maven
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../caching-ruby-gems/" title="Caching Ruby GEMs" class="md-nav__link">
      Caching Ruby GEMs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../run-your-build-locally-in-docker/" title="How to run your build locally in Docker" class="md-nav__link">
      How to run your build locally in Docker
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
    <a href="./" title="Use your own Docker image" class="md-nav__link md-nav__link--active">
      Use your own Docker image
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../adding-projects-with-submodules/" title="Adding projects with submodules or with private CocoaPods repos" class="md-nav__link">
      Adding projects with submodules or with private CocoaPods repos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../android-x86-emulator/" title="Android x86 Emulator" class="md-nav__link">
      Android x86 Emulator
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../available-environment-variables/" title="Available Environment Variables" class="md-nav__link">
      Available Environment Variables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../github-pull-request-status-troubleshooting/" title="GitHub Pull Request / build Status indicator troubleshooting" class="md-nav__link">
      GitHub Pull Request / build Status indicator troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../grant-access-to-github-organization/" title="Grant access to a GitHub Organization" class="md-nav__link">
      Grant access to a GitHub Organization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-change-the-owner-of-an-app/" title="How to change the owner of an app" class="md-nav__link">
      How to change the owner of an app
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-generate-ssh-keypair/" title="How to generate an SSH key pair" class="md-nav__link">
      How to generate an SSH key pair
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../i-cant-see-my-github-organization-repository-on-the-add-new-app-page/" title="I can't see my GitHub organization / repository on the Add New App page" class="md-nav__link">
      I can't see my GitHub organization / repository on the Add New App page
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../no-builds-are-triggered-automatically/" title="No builds are triggered when I push code into the repository" class="md-nav__link">
      No builds are triggered when I push code into the repository
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../organization-faq/" title="Organization FAQ" class="md-nav__link">
      Organization FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../should-i-commit-my-dependencies-into-my-repository/" title="Should I commit my dependencies into my repository?" class="md-nav__link">
      Should I commit my dependencies into my repository?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../why-my-build-takes-longer-on-bitrise-than-on-my-mac/" title="Why my build takes longer on Bitrise than on my Mac?" class="md-nav__link">
      Why my build takes longer on Bitrise than on my Mac?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../fastlane-tools-integration/" title="fastlane tools integration" class="md-nav__link">
      fastlane tools integration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-configure-fastlane-match-for-bitrise/" title="How to configure fastlane match for Bitrise" class="md-nav__link">
      How to configure fastlane match for Bitrise
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../add-your-first-step-to-your-workflow/" title="Add your first Step to your Workflow" class="md-nav__link">
      Add your first Step to your Workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../create-your-first-app-on-bitrise/" title="Create your first App on Bitrise.io" class="md-nav__link">
      Create your first App on Bitrise.io
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../manage-your-bitrise-workflow/" title="Manage your Bitrise workflow" class="md-nav__link">
      Manage your Bitrise workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../available-stacks/" title="Available Stacks" class="md-nav__link">
      Available Stacks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../virtual-machines/" title="Virtual Machines" class="md-nav__link">
      Virtual Machines
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../code-signing-technical-details/" title="iOS Code Signing - Technical details" class="md-nav__link">
      iOS Code Signing - Technical details
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../export-certificate-and-provisioning-profile/" title="How to export Certificates and Provisioning Profiles" class="md-nav__link">
      How to export Certificates and Provisioning Profiles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../frequent-ios-issues/" title="Frequent iOS issues" class="md-nav__link">
      Frequent iOS issues
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../known-xcode-issues/" title="List of known Xcode issues" class="md-nav__link">
      List of known Xcode issues
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../resigning-an-ipa/" title="Resigning an IPA" class="md-nav__link">
      Resigning an IPA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../uploading-certificates/" title="Uploading certificates" class="md-nav__link">
      Uploading certificates
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../signing-up-with-bitbucket/" title="Signing up with Bitbucket" class="md-nav__link">
      Signing up with Bitbucket
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../signing-up-with-email/" title="Signing up with email" class="md-nav__link">
      Signing up with email
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../signing-up-with-github/" title="Signing up with GitHub" class="md-nav__link">
      Signing up with GitHub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../trial-after-signing-up/" title="Trial after signing up" class="md-nav__link">
      Trial after signing up
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changing-the-owner-of-an-app/" title="Changing the owner of an app" class="md-nav__link">
      Changing the owner of an app
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../managing-billing-sub/" title="Managing billing and subscription for organizations" class="md-nav__link">
      Managing billing and subscription for organizations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../managing-invoices/" title="Managing the invoices of your organizations" class="md-nav__link">
      Managing the invoices of your organizations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../org-url/" title="Finding the URL of your organizations" class="md-nav__link">
      Finding the URL of your organizations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../attach-any-file-to-build/" title="Attach any file as an Artifact to the Build" class="md-nav__link">
      Attach any file as an Artifact to the Build
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../disable-a-step-by-condition/" title="Enable/Disable a step (optionally, based on a condition)" class="md-nav__link">
      Enable/Disable a step (optionally, based on a condition)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dont-mark-build-failed-if-step-fails/" title="Don't mark the Build as failed if a given step would fail (ignore the error of the Step)" class="md-nav__link">
      Don't mark the Build as failed if a given step would fail (ignore the error of the Step)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../expose-environment-variable/" title="Expose an Environment Variable and use it in another Step" class="md-nav__link">
      Expose an Environment Variable and use it in another Step
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install-additional-tools/" title="Install Any Additional Tool" class="md-nav__link">
      Install Any Additional Tool
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../optimize-your-build-times/" title="Optimize your build times" class="md-nav__link">
      Optimize your build times
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../skip-a-build/" title="Skip a Build (skip ci)" class="md-nav__link">
      Skip a Build (skip ci)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../use-bitrise-yml-from-repository/" title="Use bitrise.yml from repository" class="md-nav__link">
      Use bitrise.yml from repository
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../xcodebuild-export-options/" title="Xcode Archive: export options" class="md-nav__link">
      Xcode Archive: export options
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../bitrise-tools/" title="Bitrise Tools" class="md-nav__link">
      Bitrise Tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../workflow-editor-doesnt-load/" title="Workflow Editor doesn't load" class="md-nav__link">
      Workflow Editor doesn't load
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../auto-deploy-middleman-project/" title="Auto deploy your Middleman blog / static website" class="md-nav__link">
      Auto deploy your Middleman blog / static website
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../build-with-fake/" title="Build with FAKE (F# Make)" class="md-nav__link">
      Build with FAKE (F# Make)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../community-created/" title="Community Created Tutorials" class="md-nav__link">
      Community Created Tutorials
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../bitrise-app-deployment/" title="Bitrise OTA App Deployment" class="md-nav__link">
      Bitrise OTA App Deployment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deploy-to-testfairy-with-bitrise/" title="Deploy to TestFairy with Bitrise" class="md-nav__link">
      Deploy to TestFairy with Bitrise
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../publish-your-app-to-appaloosa/" title="Publish your app to Appaloosa" class="md-nav__link">
      Publish your app to Appaloosa
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dbreuer/devcenter/blob/master/docs/use-your-own-docker-image/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Use your own Docker image</h1>
                
                <p>!!! note &quot;Have a question or suggestion? Join the discussion!&quot;
You can find this guide's discussion topic at:
<a href="http://discuss.bitrise.io/t/how-to-use-your-own-docker-image-for-your-builds/69">discuss.bitrise.io/t/69</a></p>

<p>There are two ways to use <code>docker</code> on <a href="https://www.bitrise.io">bitrise.io</a>:</p>

<ol>
<li>Run <code>docker</code> commands yourself, e.g. with a <code>Script</code> step</li>
<li>Use a Linux/Android stack and set the environment docker image for the app (<code>Settings</code> tab)</li>
</ol>

<p><strong>The first option is strongly preferred, you should not change the base environment docker image (on the <code>Settings</code> tab on bitrise.io)
unless you really have to!</strong> Running the <code>docker</code> commands yourself during the build is way more flexible,
and provides an overall better control.</p>

<h2>Run docker commands during the build</h2>

<p><strong>This is the preferred way of using docker</strong>, both locally and on <a href="https://www.bitrise.io">bitrise.io</a>.</p>

<p>All you have to do is:</p>

<ol>
<li>Add a <code>Script</code> step to your workflow</li>
<li>And in the <code>Script</code> step run the <code>docker</code> (or <code>docker-compose</code>, etc.) command you want to</li>
<li>Additionally, if you want to run the build on <a href="https://www.bitrise.io">bitrise.io</a>, make sure that you select
a Linux/Android stack for the app; those stacks have <code>docker</code> preinstalled and ready to use our of the box.</li>
</ol>

<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>

<h3>Running docker hello-world</h3>

<p>Following the official &quot;getting started&quot; guide for example, to run the &quot;hello world&quot; docker image
your bitrise build configuration yml can be as simple as:</p>

<pre><code>---
format_version: 1.3.1
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
trigger_map:
- push_branch: &quot;*&quot;
  workflow: primary
- pull_request_source_branch: &quot;*&quot;
  workflow: primary
workflows:
  primary:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv &quot;SSH_RSA_PRIVATE_KEY&quot; | ne &quot;&quot;}}'
    - git-clone@3.4.1: {}
    - script@1.1.3:
        title: docker run hello-world
        inputs:
        - content: |-
            #!/bin/bash
            # fail if any commands fails
            set -e
            # debug log
            set -x

            docker run hello-world
</code></pre>

<h3>Build and run a Dockerfile</h3>

<p>A bit more complex example, using your own <code>Dockerfile</code> in your repository to define the docker environment:</p>

<pre><code>---
format_version: 1.3.1
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
trigger_map:
- push_branch: &quot;*&quot;
  workflow: primary
- pull_request_source_branch: &quot;*&quot;
  workflow: primary
workflows:
  primary:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv &quot;SSH_RSA_PRIVATE_KEY&quot; | ne &quot;&quot;}}'
    - git-clone@3.4.1: {}
    - script@1.1.3:
        title: docker run
        inputs:
        - content: |-
            #!/bin/bash
            # fail if any commands fails
            set -e
            # debug log
            set -x

            docker build -t bitrise-minimal-sample .
            docker run --rm bitrise-minimal-sample
</code></pre>

<p>This workflow will:</p>

<ol>
<li>Git Clone your repository</li>
<li>And then run <code>docker build -t bitrise-minimal-sample .</code> and <code>docker run --rm bitrise-minimal-sample</code> in the repository's root.</li>
</ol>

<p>If you have a <code>Dockerfile</code> like this in the root of the repository:</p>

<pre><code>FROM alpine:3.3

CMD cat /etc/alpine-release
</code></pre>

<p>The output will be something like:</p>

<pre><code>+------------------------------------------------------------------------------+
| (2) docker run hello-world                                                   |
+------------------------------------------------------------------------------+
| id: script                                                                   |
| version: 1.1.3                                                               |
| collection: https://github.com/bitrise-io/bitrise-steplib.git                |
| toolkit: bash                                                                |
| time: 2016-11-21T14:28:23Z                                                   |
+------------------------------------------------------------------------------+
|                                                                              |
+ docker build -t bitrise-minimal-sample .
Sending build context to Docker daemon 69.12 kB

Step 1 : FROM alpine:3.3
3.3: Pulling from library/alpine
985c5f84712b: Pulling fs layer
985c5f84712b: Verifying Checksum
985c5f84712b: Download complete
985c5f84712b: Pull complete
Digest: sha256:ec40755933414575748cecf929f1f2012cace2d2e0f8147e77e652d600ff17d7
Status: Downloaded newer image for alpine:3.3
 ---&gt; 6c2aa2137d97
Step 2 : CMD cat /etc/alpine-release
 ---&gt; Running in 507cfb961cc7
 ---&gt; 02a0da3ac697
Removing intermediate container 507cfb961cc7
Successfully built 02a0da3ac697
+ docker run --rm bitrise-minimal-sample
3.3.3
|                                                                              |
+---+---------------------------------------------------------------+----------+
| ✓ | docker run hello-world                                        | 4.24 sec |
+---+---------------------------------------------------------------+----------+
</code></pre>

<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>

<h3>Using docker-compose</h3>

<p>The previous example could be even shorter using <a href="https://docs.docker.com/compose/">docker-compose</a>.</p>

<p>For example, if you have a <code>docker-compose.yml</code> like this in your repository root (where the <code>Dockerfile</code> is):</p>

<pre><code>version: '2'
services:
  sample-app:
    build: .
</code></pre>

<p>You can replace the</p>

<pre><code>docker build -t bitrise-minimal-sample .
docker run --rm bitrise-minimal-sample
</code></pre>

<p>lines with a single <code>docker-compose</code> call:</p>

<pre><code>docker-compose run --rm sample-app
</code></pre>

<p>Docker compose will build and run the image automatically, you don't have to specify a <code>-t</code> tag - the <code>services</code>
name will be used by <code>docker-compose</code> to tag the image automatically.</p>

<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>

<h2>Using bitrise.io custom docker image option</h2>

<blockquote>
<p>Use a Linux/Android stack and set the environment docker image for the app (<code>Settings</code> tab)</p>
</blockquote>

<p>!!! warning &quot;Custom Android docker image&quot;
Creating and maintaining your own Android Docker image can be quite time consuming!
<strong>If what you need is just to install a couple of additional tools, you should do that with e.g. a Script step instead!</strong>
For more information see the <a href="/tips-and-tricks/install-additional-tools/">Install Any Additional Tool</a> guide.
<em>You should only use your own Android docker image if you really have to!</em></p>

<p>If you want to run your build in a custom docker environment,
<strong>you should base your own docker image on one of our base Docker images</strong>, as those have every base tool pre-installed,
the standard bitrise directories created, the Environments (like <code>$BITRISE_DEPLOY_DIR</code>) set,
and are pre-cached on the build virtual machines.
<strong>If you decide to create your own Docker image please read this guide, from start to finish!</strong></p>

<p><strong>Feel free to send Pull Request for our images if you think we missed something, which would be useful for everyone who uses our images!</strong></p>

<p>The bare-minimum base image can be found at:</p>

<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/docker-bitrise-base/">https://hub.docker.com/r/bitriseio/docker-bitrise-base/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/bitrise-base">https://github.com/bitrise-docker/bitrise-base</a></li>
</ul>

<p>Android base image, built on the bare-minimum base image, adding Android specific tools and Envs:</p>

<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/docker-android/">https://hub.docker.com/r/bitriseio/docker-android/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/android">https://github.com/bitrise-docker/android</a></li>
</ul>

<p>Android NDK image, built on the Android base image, adding a pre-installed Android NDK and Envs:</p>

<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/android-ndk/">https://hub.docker.com/r/bitriseio/android-ndk/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/android-ndk">https://github.com/bitrise-docker/android-ndk</a></li>
</ul>

<p>As you can see, if you want to base your own image on one of our available images you can do that by specifying
it at the very top of your <code>Dockerfile</code> with a <code>FROM bitriseio/IMAGE-ID:latest</code>,
for example: <code>FROM bitriseio/docker-bitrise-base:latest</code></p>

<p>!!! warning &quot;Don't use the <code>-alpha</code> images for your builds&quot;
For every docker image we have on Docker Hub we have a <code>-alpha</code> post fixed version too.
the <code>-alpha</code> ones are rebuilt frequently and are <strong>not precached on <a href="https://www.bitrise.io">bitrise.io</a></strong>,
so you should avoid those. The only purpose of the <code>-alpha</code> images is to provide
ready to use test environments for us, before we would publish a non <code>-alpha</code> version.</p>

<p><strong>Important</strong>: you have to use the <strong>Docker Hub ID</strong> of the image you want to use as
the base image (ex: <code>bitriseio/docker-android</code>, <code>bitriseio/android-ndk</code> or <code>bitriseio/docker-bitrise-base</code>).</p>

<p>You can find an example project which extends our Android image by
installing additional SDKs at: <a href="https://github.com/viktorbenei/docker-bitrise-android-ext">https://github.com/viktorbenei/docker-bitrise-android-ext</a></p>

<h3>Create the Docker Image, to be able to use it on bitrise.io</h3>

<p>You can create it any way you want to and push it into any Docker registry.
The only requirement is that it have to be a <strong>public</strong> image, private images are not (yet) supported.</p>

<p>We'll show a quick example with GitHub and Docker Hub, using Docker Hub's
automatic builds (it'll automatically create a new Docker image for you every time you change your Dockerfile on GitHub).</p>

<p>What you need for this guide:</p>

<ul>
<li><a href="https://github.com">GitHub account</a></li>
<li><a href="https://hub.docker.com">Docker Hub account</a></li>
</ul>

<p>First, you have to create a new repository on GitHub, and add at least a <code>Dockerfile</code>, with a <code>FROM bitriseio/IMAGE-ID:latest</code>
statement at the top of the <code>Dockerfile</code>, like the one you can see at:
<a href="https://github.com/viktorbenei/docker-bitrise-android-ext/blob/master/Dockerfile#L1">https://github.com/viktorbenei/docker-bitrise-android-ext/blob/master/Dockerfile#L1</a>
(<em>don't forget to commit &amp; push it!</em>).</p>

<p>!!! note &quot;Which image to use?&quot;
1. If you don't need the Android tools you should base your image on
the <strong>bitrise-base</strong> (<code>bitriseio/docker-bitrise-base</code>) image
and install just the things you need.
1. If you need the Android tools then you should use
the <strong>android</strong> (<code>bitriseio/docker-android</code>) image
or the <strong>bitrise-base</strong> (<code>bitriseio/docker-bitrise-base</code>) image.
1. You should only use the <strong>android-ndk</strong> (<code>bitriseio/android-ndk</code>) image
as the base image if you actually need the NDK.</p>

<pre><code>From a performance perspective: you should install the least amount of tools in your image,
as it'll make your image smaller, which means faster download &amp; build start.
</code></pre>

<p>You now have the description of your image. Go to <a href="https://hub.docker.com">Docker Hub</a>, click <code>Create</code> in the top menu and select <code>Create Automated Build</code>.
If you haven't linked your GitHub account to your Docker Hub account you'll have to do it now.
Once the link between GitHub and Docker Hub is established you'll see a list of your GitHub repositories.
Select the repository you just created (the one with the <code>Dockerfile</code> in its root), and follow the guide.</p>

<p>Congratulation! You now have a fully automatic Docker image creation, based on your GitHub repository!
This means that every time you change the repository, commit &amp; push the change Docker Hub will pick up the new <code>Dockerfile</code> and will build a Docker image for you.</p>

<p><strong>One more thing you should do is to Link your image to our base image you use, so that every time our base image is updated your image will update as well.</strong></p>

<p><em>This is especially important if you base your Docker image on one of our Android images.
Those images are quite large, and if we have to do a change in the base Docker image and you don't build a new image,
<strong>your image will require the old base image, which won't be pre-cached</strong> on the build Virtual Machines anymore!
This means that to <code>docker pull</code> your image it won't be enough to download just the diffs anymore,
<strong>the whole image will have to be pulled</strong> which might even result in errors like &quot;no space left on the device&quot; -
to <code>docker pull</code> the base Android image, if no cache is available, it already requires ~10GB disk space, and the Android NDK image is even larger!</em></p>

<p><strong>Link your image to one of ours</strong>: you can do this on DockerHub, on the <code>Build Settings</code> tab,
under the <code>Repository Links</code> section. Just specify the ID of our Docker image (ex: <code>bitriseio/docker-android</code>),
save the link and the next time the specified image is updated your image will be re-built as well (using the <code>Dockerfile</code> in <strong>your</strong> repository).</p>

<h3>Use your own (public) Docker image for your builds</h3>

<p>Once you have your own Docker image and you verified that it can be <code>docker pull</code>-ed,
you can set its ID on the <code>Settings</code> tab of your app on <a href="https://www.bitrise.io">bitrise.io</a>,
in the <code>Stack Selector</code> section.</p>

<p>You just have to copy paste the ID of your image (e.g. <code>bitriseio/docker-bitrise-base</code>)
into the <code>Docker image to use</code> field and click the <code>Save</code> button.
Your next build will use the image you specified.</p>

<p>!!! note &quot;Have a question or suggestion? Join the discussion!&quot;
You can find this guide's discussion topic at:
<a href="http://discuss.bitrise.io/t/how-to-use-your-own-docker-image-for-your-builds/69">discuss.bitrise.io/t/69</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../run-your-build-locally-in-docker/" title="How to run your build locally in Docker" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to run your build locally in Docker
              </span>
            </div>
          </a>
        
        
          <a href="../adding-projects-with-submodules/" title="Adding projects with submodules or with private CocoaPods repos" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Adding projects with submodules or with private CocoaPods repos
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014 - 2018 Bitrise Ltd.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.d0060b13.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-go.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-graphql.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-javascript.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-markdown.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-json.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-python.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-ruby.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-yaml.min.js"></script>
      
        <script src="../search/require.js"></script>
      
        <script src="../search/search.js"></script>
      
    
    
      
    
  </body>
</html>